<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çŒ«é—¨æ™ºèƒ½æ’ç‰ˆå™¨ Pro v7</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap');
    :root{--primary:#9b8b7d;--primary-light:#c4b5a5;--bg:#f6f5f3;--card:#fff;--text:#333;--text-light:#666;--text-muted:#999;--border:#e8e6e3;--success:#27ae60;--radius:12px;--shadow:0 2px 8px rgba(0,0,0,0.06)}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Noto Sans SC',-apple-system,sans-serif;background:var(--bg);min-height:100vh;color:var(--text);line-height:1.6}
    .header{background:var(--card);border-bottom:1px solid var(--border);padding:12px 20px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}
    .logo{display:flex;align-items:center;gap:10px;font-size:16px;font-weight:600}
    .logo-icon{width:32px;height:32px;background:linear-gradient(135deg,var(--primary),var(--primary-light));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:16px}
    .header-actions{display:flex;gap:8px}
    .btn{padding:8px 16px;border:none;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;gap:6px}
    .btn-sm{padding:6px 12px;font-size:12px}.btn-lg{padding:12px 24px;font-size:14px}
    .btn-secondary{background:#f0eeec;color:var(--text-light)}.btn-secondary:hover{background:#e5e3e0}
    .btn-primary{background:var(--text);color:#fff}.btn-primary:hover{background:#555}
    .btn-accent{background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#fff}.btn-accent:hover{box-shadow:0 4px 12px rgba(155,139,125,.3)}
    .btn-outline{background:transparent;border:1px solid var(--border);color:var(--text-light)}.btn-outline:hover{border-color:var(--primary);color:var(--primary)}
    .btn-claude{background:linear-gradient(135deg,#d97706,#f59e0b);color:#fff}
    .btn-gemini{background:linear-gradient(135deg,#4285f4,#34a853);color:#fff}
    .btn-chatgpt{background:linear-gradient(135deg,#10a37f,#1a7f64);color:#fff}
    .btn-kimi{background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff}
    .steps-nav{background:var(--card);border-bottom:1px solid var(--border);padding:0 20px;display:flex;overflow-x:auto}
    .step-tab{padding:14px 18px;font-size:13px;font-weight:500;color:var(--text-muted);cursor:pointer;border-bottom:2px solid transparent;transition:all .2s;display:flex;align-items:center;gap:8px;white-space:nowrap}
    .step-tab:hover{color:var(--text-light)}.step-tab.active{color:var(--text);border-bottom-color:var(--primary)}.step-tab.done{color:var(--success)}
    .step-num{width:20px;height:20px;background:#eee;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600}
    .step-tab.active .step-num{background:var(--primary);color:#fff}.step-tab.done .step-num{background:var(--success);color:#fff}
    .main{max-width:1400px;margin:0 auto;padding:20px}.step-panel{display:none}.step-panel.active{display:block}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;margin-bottom:16px}
    .card-header{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
    .card-title{font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px}.card-body{padding:18px}
    .mode-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}@media(max-width:700px){.mode-grid{grid-template-columns:1fr}}
    .mode-card{border:2px solid var(--border);border-radius:var(--radius);padding:18px;cursor:pointer;transition:all .2s;position:relative}
    .mode-card:hover{border-color:var(--primary-light)}.mode-card.active{border-color:var(--primary);background:#faf9f7}
    .mode-card.active::after{content:'âœ“';position:absolute;top:12px;right:12px;width:22px;height:22px;background:var(--primary);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px}
    .mode-icon{font-size:28px;margin-bottom:10px}.mode-title{font-size:15px;font-weight:600;margin-bottom:6px}
    .mode-desc{font-size:12px;color:var(--text-muted);line-height:1.6}.mode-tag{display:inline-block;padding:2px 8px;background:#f0f0f0;border-radius:4px;font-size:10px;color:var(--text-light);margin-top:8px}
    .style-section{margin-top:20px}.style-tabs{display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap}
    .style-tab{padding:8px 16px;background:#f5f5f5;border:none;border-radius:20px;font-size:13px;cursor:pointer;transition:all .2s;font-family:inherit}
    .style-tab:hover{background:#eee}.style-tab.active{background:var(--primary);color:#fff}
    .style-options{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
    .style-option{padding:12px;border:2px solid var(--border);border-radius:10px;cursor:pointer;transition:all .2s;text-align:center}
    .style-option:hover{border-color:var(--primary-light)}.style-option.active{border-color:var(--primary);background:#faf9f7}
    .style-option-icon{font-size:24px;margin-bottom:6px}.style-option-name{font-size:13px;font-weight:500}.style-option-desc{font-size:11px;color:var(--text-muted);margin-top:4px}
    .custom-style-input{width:100%;min-height:80px;padding:12px;border:1px solid var(--border);border-radius:8px;font-size:13px;font-family:inherit;resize:vertical;margin-top:10px}
    .custom-style-input:focus{outline:none;border-color:var(--primary)}
    .textarea-box{width:100%;min-height:200px;padding:14px;border:2px dashed var(--border);border-radius:10px;font-size:14px;line-height:1.8;font-family:inherit;resize:vertical;transition:all .2s}
    .textarea-box:focus{outline:none;border-color:var(--primary);border-style:solid}
    .textarea-footer{display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-size:12px;color:var(--text-muted)}
    .prompt-display{background:#1a1a2e;border-radius:10px;padding:16px;max-height:400px;overflow-y:auto}
    .prompt-display pre{color:#e0e0e0;font-family:'Monaco','Menlo',monospace;font-size:12px;line-height:1.7;white-space:pre-wrap;word-break:break-word}
    .jump-buttons{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
    .editor-layout{display:grid;grid-template-columns:1fr 360px;gap:20px}@media(max-width:900px){.editor-layout{grid-template-columns:1fr}}
    .full-article-editor{background:#fff;border:1px solid var(--border);border-radius:10px;margin-bottom:16px}
    .full-article-header{padding:12px 16px;background:#fafafa;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
    .full-article-title{font-size:13px;font-weight:600;color:var(--text)}
    .full-article-textarea{width:100%;min-height:200px;max-height:400px;padding:16px;border:none;font-size:14px;line-height:1.9;font-family:inherit;resize:vertical}.full-article-textarea:focus{outline:none}
    .blocks-list{max-height:400px;overflow-y:auto;padding:14px}
    .block-item{background:#fafafa;border-radius:10px;margin-bottom:10px;border:1px solid transparent;transition:all .2s}.block-item:hover{border-color:#e0e0e0}
    .block-head{padding:8px 12px;background:#f5f5f5;display:flex;justify-content:space-between;align-items:center;border-radius:10px 10px 0 0}
    .block-type-sel{padding:4px 8px;border:1px solid #ddd;border-radius:6px;font-size:11px;font-family:inherit;background:#fff}
    .block-actions{display:flex;gap:2px}
    .block-act-btn{width:24px;height:24px;border:none;background:transparent;border-radius:6px;cursor:pointer;font-size:12px;color:#999;display:flex;align-items:center;justify-content:center;transition:all .15s}
    .block-act-btn:hover{background:#e8e8e8;color:#666}.block-act-btn.del:hover{background:#fee;color:#e74c3c}
    .block-body{padding:10px}
    .block-input{width:100%;min-height:40px;padding:8px 10px;border:1px solid #e8e8e8;border-radius:6px;font-size:13px;line-height:1.6;font-family:inherit;resize:vertical}.block-input:focus{outline:none;border-color:var(--primary)}
    .img-placeholder{background:#fffbeb;padding:14px;border-radius:8px;text-align:center}.img-placeholder-text{color:#d97706;font-size:13px;margin-bottom:8px}
    .img-prompt-box{background:#f5f5f5;border-radius:6px;padding:10px;margin-top:10px;font-size:11px}
    .img-prompt-label{color:#666;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center}
    .img-prompt-text{color:#333;font-family:monospace;word-break:break-all}
    .phone-wrap{position:sticky;top:100px}
    .phone-frame{background:#1a1a1a;border-radius:32px;padding:10px;box-shadow:0 10px 40px rgba(0,0,0,.12)}
    .phone-screen{background:#fff;border-radius:24px;overflow:hidden}
    .phone-top{padding:8px 14px;background:#fff;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;font-size:11px;color:#999}
    .phone-content{height:420px;overflow-y:auto;padding:16px}.phone-bottom{padding:10px 14px;background:#f8f8f8;display:flex;gap:8px}.phone-bottom .btn{flex:1}
    .add-blocks{display:flex;gap:6px;flex-wrap:wrap;padding:0 14px 14px}
    .add-block-btn{padding:6px 12px;border:1px dashed #ddd;border-radius:6px;background:transparent;color:#999;font-size:12px;cursor:pointer;font-family:inherit;transition:all .15s}
    .add-block-btn:hover{border-color:var(--primary);color:var(--primary);background:#faf9f7}
    .color-bar{display:flex;align-items:center;gap:12px;padding:14px 18px;border-top:1px solid var(--border);flex-wrap:wrap}
    .color-label{font-size:13px;color:var(--text-light)}.color-options{display:flex;gap:6px}
    .color-btn{width:28px;height:28px;border-radius:8px;border:2px solid transparent;cursor:pointer;transition:all .15s}.color-btn:hover{transform:scale(1.1)}.color-btn.active{border-color:var(--text)}
    .material-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}
    .material-card{border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}
    .material-head{padding:12px 14px;background:#fafafa;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
    .material-title{font-size:13px;font-weight:600;display:flex;align-items:center;gap:6px}
    .material-content{padding:14px;min-height:100px;max-height:200px;overflow-y:auto;font-size:13px;line-height:1.8;color:var(--text-light);white-space:pre-wrap}
    .material-content.empty{color:#ccc;font-style:italic;display:flex;align-items:center;justify-content:center}
    .image-prompt-card{background:#fffbeb;border:1px solid #fcd34d;border-radius:10px;padding:14px;margin-bottom:12px}
    .image-prompt-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .image-prompt-title{font-size:13px;font-weight:600;color:#92400e}
    .image-prompt-content{background:#fff;border-radius:6px;padding:10px;font-size:12px;color:#333;line-height:1.6;font-family:monospace;min-height:60px}
    .image-prompt-buttons{display:flex;gap:6px;margin-top:10px;flex-wrap:wrap}
    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;visibility:hidden;transition:all .2s}
    .modal-overlay.show{opacity:1;visibility:visible}
    .modal{background:#fff;border-radius:14px;width:90%;max-width:600px;max-height:85vh;overflow:hidden;transform:scale(.95);transition:transform .2s}.modal-overlay.show .modal{transform:scale(1)}
    .modal-head{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
    .modal-title{font-size:15px;font-weight:600}
    .modal-close{width:28px;height:28px;border:none;background:#f5f5f5;border-radius:6px;cursor:pointer;font-size:16px;color:#999}.modal-close:hover{background:#eee;color:#666}
    .modal-body{padding:20px;max-height:60vh;overflow-y:auto}
    .modal-input{width:100%;padding:12px;border:1px solid var(--border);border-radius:8px;font-size:13px;font-family:inherit;margin-bottom:12px}.modal-input:focus{outline:none;border-color:var(--primary)}
    .modal-divider{text-align:center;color:#999;font-size:12px;margin:16px 0;position:relative}
    .modal-divider::before,.modal-divider::after{content:'';position:absolute;top:50%;width:40%;height:1px;background:#eee}.modal-divider::before{left:0}.modal-divider::after{right:0}
    .modal-upload{padding:30px;border:2px dashed #ddd;border-radius:10px;text-align:center;cursor:pointer;transition:all .2s}.modal-upload:hover{border-color:var(--primary);background:#faf9f7}
    .modal-foot{padding:14px 20px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:8px}
    .toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);background:#333;color:#fff;padding:12px 24px;border-radius:8px;font-size:13px;opacity:0;transition:all .3s;z-index:1001}
    .toast.show{transform:translateX(-50%) translateY(0);opacity:1}
    .nav-row{display:flex;justify-content:space-between;margin-top:20px;padding-top:16px;border-top:1px solid var(--border)}
    .tip-box{background:#f8f7f5;border-radius:8px;padding:14px;font-size:13px;color:var(--text-light);margin-top:14px}
    .tip-box-title{font-weight:600;color:var(--text);margin-bottom:6px}.tip-box ol{padding-left:18px;line-height:1.9}
    .text-muted{color:var(--text-muted)}.mb-4{margin-bottom:16px}.mb-2{margin-bottom:8px}.hidden{display:none!important}.divider-preview{text-align:center;color:#ddd;padding:6px;font-size:12px}
  </style>
</head>
<body>
<header class="header"><div class="logo"><div class="logo-icon">ğŸ±</div><span>çŒ«é—¨æ™ºèƒ½æ’ç‰ˆå™¨ Pro v7</span></div><div class="header-actions"><button class="btn btn-secondary btn-sm" onclick="resetAll()">é‡æ–°å¼€å§‹</button><button class="btn btn-primary btn-sm" onclick="copyAllCode()">ğŸ“‹ å¤åˆ¶ä»£ç </button></div></header>
<nav class="steps-nav"><div class="step-tab active" data-step="1" onclick="goToStep(1)"><span class="step-num">1</span> é€‰æ‹©æ¨¡å¼</div><div class="step-tab" data-step="2" onclick="goToStep(2)"><span class="step-num">2</span> ç”Ÿæˆæç¤ºè¯</div><div class="step-tab" data-step="3" onclick="goToStep(3)"><span class="step-num">3</span> ç¼–è¾‘æ’ç‰ˆ</div><div class="step-tab" data-step="4" onclick="goToStep(4)"><span class="step-num">4</span> è¥é”€ç‰©æ–™</div></nav>
<div class="main">
<div class="step-panel active" data-step="1"><div class="card"><div class="card-header"><div class="card-title">ğŸ“Œ é€‰æ‹©ä½ çš„ä½¿ç”¨åœºæ™¯</div></div><div class="card-body"><div class="mode-grid"><div class="mode-card active" data-mode="A" onclick="selectMode('A')"><div class="mode-icon">ğŸ“</div><div class="mode-title">æ¨¡å¼Aï¼šæ–‡ç« æ’ç‰ˆ</div><div class="mode-desc">æ–‡ç« å·²ç»å†™å¥½ï¼Œéœ€è¦æ·»åŠ é‡‘å¥ã€åˆ†æ®µã€å¼ºè°ƒç­‰æ’ç‰ˆæ ¼å¼</div><div class="mode-tag">æœ€å¸¸ç”¨</div></div><div class="mode-card" data-mode="B" onclick="selectMode('B')"><div class="mode-icon">âœ¨</div><div class="mode-title">æ¨¡å¼Bï¼šä¸»é¢˜åˆ›ä½œ</div><div class="mode-desc">åªæœ‰ä¸€ä¸ªä¸»é¢˜æˆ–æƒ³æ³•ï¼Œéœ€è¦AIç”Ÿæˆå®Œæ•´çš„çˆ†æ¬¾æ–‡ç« </div><div class="mode-tag">é€‚åˆæ²¡ç´ ææ—¶</div></div><div class="mode-card" data-mode="C" onclick="selectMode('C')"><div class="mode-icon">ğŸ“š</div><div class="mode-title">æ¨¡å¼Cï¼šé•¿ç¨¿æç‚¼</div><div class="mode-desc">æœ‰è¯¾ç¨‹é€å­—ç¨¿ã€æ’­å®¢æ–‡å­—ç¨¿ç­‰é•¿ç´ æï¼Œéœ€è¦æç‚¼æˆç²¾åæ–‡ç« </div><div class="mode-tag">é€‚åˆæœ‰åŸå§‹ç´ æ</div></div><div class="mode-card" data-mode="D" onclick="selectMode('D')"><div class="mode-icon">ğŸ§©</div><div class="mode-title">æ¨¡å¼Dï¼šç´ ææ•´åˆ</div><div class="mode-desc">æœ‰å¤šä¸ªç¢ç‰‡ç´ æï¼ˆåˆ«äººçš„æ–‡ç« ã€ç¬”è®°ã€æƒ³æ³•ç­‰ï¼‰ï¼Œéœ€è¦æ•´åˆæˆåŸåˆ›æ–‡ç« </div><div class="mode-tag">é€‚åˆæ”¶é›†äº†å¾ˆå¤šç´ æ</div></div></div><div class="style-section hidden" id="styleSection"><div class="card-title mb-2">ğŸ¨ é€‰æ‹©æ–‡ç« é£æ ¼</div><div class="style-tabs"><button class="style-tab active" data-tab="preset" onclick="switchStyleTab('preset')">é¢„è®¾é£æ ¼</button><button class="style-tab" data-tab="blogger" onclick="switchStyleTab('blogger')">åšä¸»é£æ ¼</button><button class="style-tab" data-tab="custom" onclick="switchStyleTab('custom')">è‡ªå®šä¹‰</button></div><div class="style-panel" data-panel="preset"><div class="style-options"><div class="style-option active" data-style="catgate" onclick="selectStyle('catgate')"><div class="style-option-icon">ğŸ±</div><div class="style-option-name">çŒ«é—¨é£æ ¼</div><div class="style-option-desc">ä¸“ä¸šæœ‰æ·±åº¦ã€æ¸©æš–æœ‰æ´å¯Ÿ</div></div><div class="style-option" data-style="lemon" onclick="selectStyle('lemon')"><div class="style-option-icon">ğŸ‹</div><div class="style-option-name">æŸ æª¬å¼</div><div class="style-option-desc">è½»æ¾æ´»æ³¼ã€å¹´è½»åŒ–</div></div><div class="style-option" data-style="healing" onclick="selectStyle('healing')"><div class="style-option-icon">ğŸŒ¸</div><div class="style-option-name">æ²»æ„ˆå¼</div><div class="style-option-desc">æ¸©æš–å…±æƒ…ã€æƒ…æ„Ÿå‘</div></div><div class="style-option" data-style="hardcore" onclick="selectStyle('hardcore')"><div class="style-option-icon">ğŸ’</div><div class="style-option-name">å¹²è´§å¼</div><div class="style-option-desc">ç¡¬æ ¸ä¸“ä¸šã€æœ‰æ·±åº¦</div></div><div class="style-option" data-style="story" onclick="selectStyle('story')"><div class="style-option-icon">ğŸ“–</div><div class="style-option-name">æ•…äº‹å¼</div><div class="style-option-desc">æ¡ˆä¾‹é©±åŠ¨ã€å™äº‹æ„Ÿ</div></div></div></div><div class="style-panel hidden" data-panel="blogger"><div class="style-options"><div class="style-option" data-style="mimeng" onclick="selectStyle('mimeng')"><div class="style-option-icon">ğŸ”¥</div><div class="style-option-name">å’ªè’™å¼</div><div class="style-option-desc">æƒ…ç»ªå¼ åŠ›ã€é‡‘å¥å¯†é›†</div></div><div class="style-option" data-style="kaizhi" onclick="selectStyle('kaizhi')"><div class="style-option-icon">ğŸ§ </div><div class="style-option-name">å¼€æ™ºå¼</div><div class="style-option-desc">è®¤çŸ¥ç§‘å­¦ã€ä¿¡æ¯å¯†åº¦é«˜</div></div><div class="style-option" data-style="zhihu" onclick="selectStyle('zhihu')"><div class="style-option-icon">ğŸ’¡</div><div class="style-option-name">çŸ¥ä¹å¤§Vå¼</div><div class="style-option-desc">é€»è¾‘æ¸…æ™°ã€è®ºæ®å……åˆ†</div></div><div class="style-option" data-style="lifestyle" onclick="selectStyle('lifestyle')"><div class="style-option-icon">ğŸŒ¿</div><div class="style-option-name">ç”Ÿæ´»æ–¹å¼å¼</div><div class="style-option-desc">ç²¾è‡´ç¾å­¦ã€æœ‰å“å‘³</div></div></div></div><div class="style-panel hidden" data-panel="custom"><p class="text-muted" style="font-size:12px;margin-bottom:8px">æè¿°ä½ æƒ³è¦çš„é£æ ¼ï¼Œæˆ–ç²˜è´´ä¸€ç¯‡å‚è€ƒæ–‡ç« ï¼š</p><textarea class="custom-style-input" id="customStyleInput" placeholder="ä¾‹å¦‚ï¼šåƒææ¾è”šè€å¸ˆé‚£æ ·ï¼Œç”¨å¿ƒç†å­¦è§†è§’åˆ†ææ—¥å¸¸é—®é¢˜ï¼Œè¯­è¨€å¹³å®ä½†æœ‰æ´å¯Ÿ..."></textarea></div></div></div></div><div class="nav-row"><div></div><button class="btn btn-primary" onclick="goToStep(2)">ä¸‹ä¸€æ­¥ï¼šç”Ÿæˆæç¤ºè¯ â†’</button></div></div>
<div class="step-panel" data-step="2"><div class="card"><div class="card-header"><div class="card-title">ğŸ“„ ç²˜è´´ä½ çš„ç´ æ</div></div><div class="card-body"><div class="text-muted mb-2" id="materialInputDesc" style="font-size:13px">æŠŠä½ å·²å†™å¥½çš„æ–‡ç« ç²˜è´´åˆ°ä¸‹æ–¹</div><textarea class="textarea-box" id="userMaterialInput" placeholder="åœ¨è¿™é‡Œç²˜è´´ä½ çš„æ–‡ç« ã€ç´ æã€ä¸»é¢˜æƒ³æ³•..." style="min-height:180px" oninput="updateMaterialWordCount()"></textarea><div class="textarea-footer"><span id="materialWordCount">0 å­—</span><button class="btn btn-sm btn-secondary" onclick="clearMaterialInput()">æ¸…ç©º</button></div></div></div><div class="card"><div class="card-header"><div class="card-title">ğŸ“‹ å®Œæ•´æç¤ºè¯</div><button class="btn btn-primary btn-sm" onclick="copyPrompt()">ğŸ“‹ å¤åˆ¶</button></div><div class="card-body"><div class="prompt-display"><pre id="promptText"></pre></div><div class="tip-box"><div class="tip-box-title">ğŸ’¡ ä½¿ç”¨è¯´æ˜</div><ol><li>åœ¨ä¸Šæ–¹ç²˜è´´ä½ çš„ç´ æ</li><li>ç‚¹å‡»ä¸‹æ–¹AIæŒ‰é’®ï¼Œè‡ªåŠ¨å¤åˆ¶æç¤ºè¯å¹¶è·³è½¬</li><li>æŠŠAIè¿”å›çš„ã€å®Œæ•´å†…å®¹ã€‘å¤åˆ¶ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥ç²˜è´´</li></ol></div><div class="jump-buttons"><button onclick="copyAndJump('https://claude.ai')" class="btn btn-claude">ğŸ“‹ å¤åˆ¶å¹¶æ‰“å¼€ Claude</button><button onclick="copyAndJump('https://gemini.google.com')" class="btn btn-gemini">ğŸ“‹ å¤åˆ¶å¹¶æ‰“å¼€ Gemini</button><button onclick="copyAndJump('https://chat.openai.com')" class="btn btn-chatgpt">ğŸ“‹ å¤åˆ¶å¹¶æ‰“å¼€ ChatGPT</button><button onclick="copyAndJump('https://kimi.moonshot.cn')" class="btn btn-kimi">ğŸ“‹ å¤åˆ¶å¹¶æ‰“å¼€ Kimi</button></div></div></div><div class="nav-row"><button class="btn btn-secondary" onclick="goToStep(1)">â† è¿”å›é€‰æ‹©</button><button class="btn btn-primary" onclick="goToStep(3)">ä¸‹ä¸€æ­¥ï¼šç¼–è¾‘æ’ç‰ˆ â†’</button></div></div>
<div class="step-panel" data-step="3"><div class="card" id="inputCard"><div class="card-header"><div class="card-title">ğŸ“¥ ç²˜è´´AIè¿”å›çš„å†…å®¹</div></div><div class="card-body"><textarea class="textarea-box" id="inputText" placeholder="æŠŠAIç”Ÿæˆçš„å®Œæ•´å†…å®¹ç²˜è´´åˆ°è¿™é‡Œï¼ˆåŒ…æ‹¬æ–‡ç« å’Œé…å›¾æç¤ºè¯ï¼‰..." oninput="updateWordCount()"></textarea><div class="textarea-footer"><span id="wordCount">0 å­—</span><button class="btn btn-accent" onclick="parseContent()">ğŸš€ æ™ºèƒ½è§£æ</button></div></div></div><div class="editor-layout" id="editorSection" style="display:none"><div><div class="full-article-editor"><div class="full-article-header"><div class="full-article-title">ğŸ“ å®Œæ•´æ–‡ç« ï¼ˆå¯ç›´æ¥ç¼–è¾‘ï¼‰</div><button class="btn btn-sm btn-outline" onclick="syncFromFullArticle()">åŒæ­¥åˆ°æ¨¡å—</button></div><textarea class="full-article-textarea" id="fullArticleText" oninput="onFullArticleInput()" placeholder="åœ¨è¿™é‡Œç¼–è¾‘å®Œæ•´æ–‡ç« ..."></textarea></div><div class="card"><div class="card-header"><div class="card-title">ğŸ“¦ å†…å®¹æ¨¡å— <span id="blockCount">(0)</span></div><button class="btn btn-sm btn-outline" onclick="showInputCard()">é‡æ–°ç²˜è´´</button></div><div class="blocks-list" id="blocksList"></div><div class="add-blocks"><button class="add-block-btn" onclick="addBlock('paragraph')">+ æ®µè½</button><button class="add-block-btn" onclick="addBlock('quote')">+ é‡‘å¥</button><button class="add-block-btn" onclick="addBlock('heading')">+ æ ‡é¢˜</button><button class="add-block-btn" onclick="addBlock('divider')">+ åˆ†å‰²çº¿</button><button class="add-block-btn" onclick="addBlock('list')">+ åˆ—è¡¨</button><button class="add-block-btn" onclick="addBlock('imagePlaceholder')">+ å›¾ç‰‡</button></div><div class="color-bar"><span class="color-label">é…è‰²ï¼š</span><div class="color-options"><button class="color-btn active" data-scheme="morandi" style="background:linear-gradient(135deg,#9b8b7d,#c4b5a5)" title="è«å…°è¿ª"></button><button class="color-btn" data-scheme="green" style="background:linear-gradient(135deg,#5d8a66,#7eb085)" title="æ£®ç»¿"></button><button class="color-btn" data-scheme="purple" style="background:linear-gradient(135deg,#8b7eb8,#a99cd1)" title="è–°è¡£è‰"></button><button class="color-btn" data-scheme="milktea" style="background:linear-gradient(135deg,#a67c52,#c9a77c)" title="å¥¶èŒ¶"></button><button class="color-btn" data-scheme="blackgold" style="background:linear-gradient(135deg,#333,#c9a962)" title="é»‘é‡‘"></button><button class="color-btn" data-scheme="coral" style="background:linear-gradient(135deg,#e07a5f,#f2a07b)" title="çŠç‘š"></button></div></div></div></div><div class="phone-wrap"><div class="phone-frame"><div class="phone-screen"><div class="phone-top"><span>é¢„è§ˆæ•ˆæœ</span><span>çŒ«é—¨</span></div><div class="phone-content" id="previewContent"><div style="text-align:center;color:#999;padding:40px">é¢„è§ˆå†…å®¹</div></div><div class="phone-bottom"><button class="btn btn-secondary btn-sm" onclick="copyAllCode()">å¤åˆ¶ä»£ç </button><button class="btn btn-primary btn-sm" onclick="goToStep(4)">è¥é”€ç‰©æ–™</button></div></div></div></div></div><div class="nav-row"><button class="btn btn-secondary" onclick="goToStep(2)">â† è¿”å›æç¤ºè¯</button><button class="btn btn-primary" onclick="goToStep(4)">ä¸‹ä¸€æ­¥ï¼šè¥é”€ç‰©æ–™ â†’</button></div></div>
<div class="step-panel" data-step="4"><div class="card"><div class="card-header"><div class="card-title">ğŸ¯ ç”Ÿæˆè¥é”€ç‰©æ–™</div></div><div class="card-body"><p class="text-muted mb-4">æ ¹æ®ä½ çš„æ–‡ç« å†…å®¹ï¼Œä¸€é”®ç”Ÿæˆå…¨å¥—è¥é”€ç‰©æ–™çš„æç¤ºè¯</p><button class="btn btn-accent btn-lg" onclick="generateMaterials()">âœ¨ ç”Ÿæˆæç¤ºè¯</button></div></div><div class="card" id="materialPromptCard" style="display:none"><div class="card-header"><div class="card-title">ğŸ“‹ è¥é”€ç‰©æ–™æç¤ºè¯</div><button class="btn btn-primary btn-sm" onclick="copyMaterialPrompt()">ğŸ“‹ å¤åˆ¶</button></div><div class="card-body"><div class="prompt-display" style="max-height:200px"><pre id="materialPromptText"></pre></div><div class="jump-buttons"><button onclick="copyMaterialAndJump('https://claude.ai')" class="btn btn-claude">ğŸ“‹ å¤åˆ¶å¹¶æ‰“å¼€ Claude</button><button onclick="copyMaterialAndJump('https://gemini.google.com')" class="btn btn-gemini">ğŸ“‹ å¤åˆ¶å¹¶æ‰“å¼€ Gemini</button><button onclick="copyMaterialAndJump('https://chat.openai.com')" class="btn btn-chatgpt">ğŸ“‹ å¤åˆ¶å¹¶æ‰“å¼€ ChatGPT</button><button onclick="copyMaterialAndJump('https://kimi.moonshot.cn')" class="btn btn-kimi">ğŸ“‹ å¤åˆ¶å¹¶æ‰“å¼€ Kimi</button></div></div></div>
<div class="card" id="imagePromptsCard" style="display:none"><div class="card-header"><div class="card-title">ğŸ¨ AIç”Ÿæˆçš„é…å›¾æç¤ºè¯</div></div><div class="card-body"><p class="text-muted mb-4">ä»¥ä¸‹æ˜¯AIæ ¹æ®æ–‡ç« å†…å®¹ç”Ÿæˆçš„é…å›¾æç¤ºè¯ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œè¯·æ£€æŸ¥AIè¿”å›çš„å†…å®¹æ˜¯å¦åŒ…å«é…å›¾éƒ¨åˆ†ï¼‰</p><div class="image-prompt-card"><div class="image-prompt-header"><div class="image-prompt-title">ğŸ“± å…¬ä¼—å·å°é¢å›¾</div><button class="btn btn-sm btn-outline" onclick="copyImagePromptByType('cover')">å¤åˆ¶</button></div><div class="image-prompt-content" id="coverImagePrompt">ç­‰å¾…è§£æ...</div><div class="image-prompt-buttons"><button onclick="copyImgAndJump('cover','https://gemini.google.com')" class="btn btn-sm btn-gemini">Gemini</button><button onclick="copyImgAndJump('cover','https://chat.openai.com')" class="btn btn-sm btn-chatgpt">DALL-E</button></div></div><div class="image-prompt-card"><div class="image-prompt-header"><div class="image-prompt-title">ğŸ“• å°çº¢ä¹¦å°é¢å›¾</div><button class="btn btn-sm btn-outline" onclick="copyImagePromptByType('xhsCover')">å¤åˆ¶</button></div><div class="image-prompt-content" id="xhsCoverImagePrompt">ç­‰å¾…è§£æ...</div><div class="image-prompt-buttons"><button onclick="copyImgAndJump('xhsCover','https://gemini.google.com')" class="btn btn-sm btn-gemini">Gemini</button><button onclick="copyImgAndJump('xhsCover','https://chat.openai.com')" class="btn btn-sm btn-chatgpt">DALL-E</button></div></div><div class="image-prompt-card"><div class="image-prompt-header"><div class="image-prompt-title">ğŸ’¬ æœ‹å‹åœˆ/å¾®åšé…å›¾</div><button class="btn btn-sm btn-outline" onclick="copyImagePromptByType('social')">å¤åˆ¶</button></div><div class="image-prompt-content" id="socialImagePrompt">ç­‰å¾…è§£æ...</div><div class="image-prompt-buttons"><button onclick="copyImgAndJump('social','https://gemini.google.com')" class="btn btn-sm btn-gemini">Gemini</button><button onclick="copyImgAndJump('social','https://chat.openai.com')" class="btn btn-sm btn-chatgpt">DALL-E</button></div></div><div class="image-prompt-card"><div class="image-prompt-header"><div class="image-prompt-title">ğŸ’ é‡‘å¥å¡ç‰‡èƒŒæ™¯</div><button class="btn btn-sm btn-outline" onclick="copyImagePromptByType('quoteCard')">å¤åˆ¶</button></div><div class="image-prompt-content" id="quoteCardImagePrompt">ç­‰å¾…è§£æ...</div><div class="image-prompt-buttons"><button onclick="copyImgAndJump('quoteCard','https://gemini.google.com')" class="btn btn-sm btn-gemini">Gemini</button><button onclick="copyImgAndJump('quoteCard','https://chat.openai.com')" class="btn btn-sm btn-chatgpt">DALL-E</button></div></div></div></div>
<div class="card" id="materialInputCard" style="display:none"><div class="card-header"><div class="card-title">ğŸ“¥ ç²˜è´´AIè¿”å›çš„ç‰©æ–™</div></div><div class="card-body"><textarea class="textarea-box" id="materialInputText" placeholder="æŠŠAIç”Ÿæˆçš„è¥é”€ç‰©æ–™ç²˜è´´åˆ°è¿™é‡Œ..." style="min-height:150px"></textarea><div style="margin-top:12px;display:flex;gap:8px"><button class="btn btn-accent" onclick="parseMaterials()">ğŸš€ æ™ºèƒ½è§£æ</button><button class="btn btn-secondary" onclick="clearMaterialsInput()">æ¸…ç©º</button></div></div></div><div class="material-grid" id="materialGrid" style="display:none"></div><div class="card" id="materialActionsCard" style="display:none"><div class="card-body" style="display:flex;gap:12px;justify-content:center"><button class="btn btn-primary" onclick="copyAllMaterials()">ğŸ“‹ å¤åˆ¶æ‰€æœ‰ç‰©æ–™</button><button class="btn btn-secondary" onclick="exportMaterials()">ğŸ’¾ å¯¼å‡ºä¸ºæ–‡æœ¬</button></div></div><div class="nav-row"><button class="btn btn-secondary" onclick="goToStep(3)">â† è¿”å›ç¼–è¾‘</button><button class="btn btn-primary" onclick="copyAllCode()">ğŸ“‹ å¤åˆ¶æ–‡ç« ä»£ç </button></div></div>
</div>
<div class="modal-overlay" id="imageModal"><div class="modal"><div class="modal-head"><div class="modal-title">æ·»åŠ å›¾ç‰‡</div><button class="modal-close" onclick="closeImageModal()">Ã—</button></div><div class="modal-body"><input type="text" class="modal-input" id="imageUrlInput" placeholder="ç²˜è´´å›¾ç‰‡é“¾æ¥ (https://...)"><div class="modal-divider">æˆ–</div><div class="modal-upload" onclick="document.getElementById('imageFileInput').click()"><div style="font-size:28px;margin-bottom:6px">ğŸ“¤</div><div style="color:#666;font-size:13px">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</div><input type="file" id="imageFileInput" accept="image/*" style="display:none" onchange="handleImageUpload(event)"></div></div><div class="modal-foot"><button class="btn btn-secondary" onclick="closeImageModal()">å–æ¶ˆ</button><button class="btn btn-primary" onclick="confirmImage()">ç¡®å®š</button></div></div></div>
<div class="toast" id="toast"></div>
<script>
let currentStep=1,currentMode='A',currentStyleTab='preset',currentStyle='catgate',currentScheme='morandi',blocks=[],editingImageIndex=null,materials={},imagePrompts={},fullArticleSyncTimeout=null;
const schemes={morandi:{primary:'#9b8b7d',text:'#5a5a5a',textLight:'#777',bgWarm:'#f7f5f3',bgWarmEnd:'#efe9e4',bgCard:'#f7f5f3',border:'#c4b5a5'},green:{primary:'#5d8a66',text:'#3d4a3f',textLight:'#666',bgWarm:'#f4f9f5',bgWarmEnd:'#e8f2ea',bgCard:'#f4f9f5',border:'#7eb085'},purple:{primary:'#8b7eb8',text:'#4a4558',textLight:'#666',bgWarm:'#f8f6fc',bgWarmEnd:'#f0ecf8',bgCard:'#f8f6fc',border:'#a99cd1'},milktea:{primary:'#a67c52',text:'#4d4035',textLight:'#6d5d4d',bgWarm:'#faf6f1',bgWarmEnd:'#f5ebe0',bgCard:'#faf6f1',border:'#c9a77c'},blackgold:{primary:'#c9a962',text:'#333',textLight:'#555',bgWarm:'#f9f8f5',bgWarmEnd:'#f3f0e8',bgCard:'#f9f8f5',border:'#c9a962'},coral:{primary:'#e07a5f',text:'#4a4a4a',textLight:'#666',bgWarm:'#fef7f5',bgWarmEnd:'#fceee9',bgCard:'#fef7f5',border:'#f2a07b'}};
const blockTypeNames={paragraph:'æ®µè½',emphasis:'å¼ºè°ƒ',quote:'é‡‘å¥',heading:'æ ‡é¢˜',list:'åˆ—è¡¨',divider:'åˆ†å‰²çº¿',image:'å›¾ç‰‡',imagePlaceholder:'å›¾ç‰‡å»ºè®®'};
const styleDescriptions={catgate:'ä¸“ä¸šæœ‰æ·±åº¦ä½†ä¸æ™¦æ¶©ï¼Œåƒä¸€ä½å€¼å¾—ä¿¡èµ–çš„æœ‹å‹åœ¨åˆ†äº«è§è§£ã€‚æœ‰å¿ƒç†å­¦ä¸“ä¸šåº•è•´ï¼Œå–„äºç”¨æ—¥å¸¸ä¾‹å­è§£é‡Šå¤æ‚æ¦‚å¿µï¼Œè®©è¯»è€…æ—¢æœ‰æ”¶è·æ„Ÿåˆè§‰å¾—äº²åˆ‡ã€‚',lemon:'è½»æ¾æ´»æ³¼ã€å¹´è½»åŒ–ã€æœ‰è¶£å‘³ï¼Œåƒå’Œå¥½æœ‹å‹èŠå¤©ä¸€æ ·è‡ªç„¶ã€‚å–„ç”¨æ¯”å–»ã€ç±»æ¯”å’Œç½‘ç»œç”¨è¯­ï¼Œè®©ä¸“ä¸šå†…å®¹ä¹Ÿå˜å¾—å¹³æ˜“è¿‘äººã€‚',healing:'æ¸©æš–æ²»æ„ˆã€å…±æƒ…æ„Ÿå¼ºã€æƒ…æ„Ÿå‘ã€‚åƒä¸€æ¯çƒ­å¯å¯ï¼Œè®©è¯»è€…æ„Ÿåˆ°è¢«ç†è§£å’ŒæŠšæ…°ã€‚å–„äºæ•æ‰ç»†è…»çš„æƒ…æ„Ÿï¼Œæ–‡å­—æœ‰ç–—æ„ˆåŠ›é‡ã€‚',hardcore:'ç¡¬æ ¸å¹²è´§ã€ä¸“ä¸šæ·±åº¦ã€ä¿¡æ¯å¯†é›†ã€‚é€»è¾‘ä¸¥è°¨ï¼Œè®ºæ®æ‰å®ï¼Œé€‚åˆæƒ³æ·±å…¥å­¦ä¹ çš„è¯»è€…ã€‚æ¯ä¸€æ®µéƒ½æœ‰å®æ‰“å®çš„çŸ¥è¯†ç‚¹ã€‚',story:'æ•…äº‹é©±åŠ¨ã€æ¡ˆä¾‹ä¸°å¯Œã€å™äº‹æ„Ÿå¼ºã€‚ç”¨çœŸå®æˆ–å…¸å‹çš„æ•…äº‹æ¥ä¼ é€’è§‚ç‚¹ï¼Œè®©è¯»è€…åœ¨æ•…äº‹ä¸­è‡ªç„¶é¢†æ‚Ÿã€‚',mimeng:'æƒ…ç»ªå¼ åŠ›å¼ºã€è§‚ç‚¹çŠ€åˆ©ã€çŸ­å¥ä¸ºä¸»ã€‚æ¯ä¸€å¥éƒ½æœ‰å†²å‡»åŠ›ï¼Œè®©è¯»è€…å¿ä¸ä½ç‚¹å¤´æˆ–è½¬å‘ã€‚å–„ç”¨å¯¹æ¯”ã€åè½¬ã€æ‚¬å¿µã€‚',kaizhi:'è®¤çŸ¥ç§‘å­¦è§†è§’ã€ä¿¡æ¯å¯†åº¦é«˜ã€æœ‰å­¦æœ¯åº•è•´ã€é€»è¾‘ä¸¥å¯†ã€‚å¼•ç”¨ç ”ç©¶å’Œç†è®ºï¼Œä½†è¡¨è¾¾æ¸…æ™°æ˜“æ‡‚ï¼Œé€‚åˆæ±‚çŸ¥æ¬²å¼ºçš„è¯»è€…ã€‚',zhihu:'é€»è¾‘æ¸…æ™°ã€è®ºæ®å……åˆ†ã€ä¸“ä¸šå¯ä¿¡ã€ç»“æ„åŒ–å¼ºã€‚åƒä¸€ç¯‡ç²¾å¿ƒç»„ç»‡çš„å›ç­”ï¼Œå…ˆæŠ›ç»“è®ºå†å±•å¼€è®ºè¯ã€‚',lifestyle:'ç²¾è‡´ç¾å­¦ã€æœ‰å“å‘³ã€ä¸è¯´æ•™ã€ç”Ÿæ´»åŒ–ã€‚æ–‡å­—æœ‰è´¨æ„Ÿï¼Œä¼ é€’ä¸€ç§ç†æƒ³ç”Ÿæ´»çš„å‘å¾€ï¼Œè®©äººå¿ƒç”Ÿå‘å¾€ã€‚'};
const materialTypes=[{id:'pyq_author',name:'æœ‹å‹åœˆï¼ˆä½œè€…ç‰ˆï¼‰',icon:'ğŸ“±'},{id:'pyq_assistant',name:'æœ‹å‹åœˆï¼ˆè½¬å‘ç‰ˆï¼‰',icon:'ğŸ“±'},{id:'xiaohongshu',name:'å°çº¢ä¹¦æ–‡æ¡ˆ',icon:'ğŸ“•'},{id:'xhs_titles',name:'å°çº¢ä¹¦æ ‡é¢˜',icon:'ğŸ“•'},{id:'community',name:'ç¤¾ç¾¤è½¬å‘è¯æœ¯',icon:'ğŸ‘¥'},{id:'private',name:'ç§èŠæ¨èè¯æœ¯',icon:'ğŸ’¬'},{id:'titles',name:'æ–‡ç« æ ‡é¢˜å¤‡é€‰',icon:'ğŸ“°'},{id:'audience',name:'ç›®æ ‡äººç¾¤ç”»åƒ',icon:'ğŸ¯'},{id:'quotes',name:'é‡‘å¥å¡ç‰‡æ–‡æ¡ˆ',icon:'ğŸ’'},{id:'video',name:'çŸ­è§†é¢‘å£æ’­æ–‡æ¡ˆ',icon:'ğŸ¬'},{id:'secondary',name:'æ¬¡æ¡/è½¬è½½ç‰ˆ',icon:'ğŸ“„'},{id:'seo',name:'SEOå…³é”®è¯',icon:'ğŸ”'}];

function goToStep(step){if(step===2){generatePrompt();updateMaterialInputDesc()}if(step===4&&blocks.length>0){document.getElementById('imagePromptsCard').style.display='block'}currentStep=step;document.querySelectorAll('.step-panel').forEach(p=>p.classList.remove('active'));document.querySelector('.step-panel[data-step="'+step+'"]').classList.add('active');document.querySelectorAll('.step-tab').forEach(t=>{t.classList.remove('active','done');const s=parseInt(t.dataset.step);if(s<step)t.classList.add('done');if(s===step)t.classList.add('active')});window.scrollTo({top:0,behavior:'smooth'})}

function selectMode(mode){currentMode=mode;document.querySelectorAll('.mode-card').forEach(c=>c.classList.toggle('active',c.dataset.mode===mode));document.getElementById('styleSection').classList.toggle('hidden',mode==='A')}

function switchStyleTab(tab){currentStyleTab=tab;document.querySelectorAll('.style-tab').forEach(t=>t.classList.toggle('active',t.dataset.tab===tab));document.querySelectorAll('.style-panel').forEach(p=>p.classList.toggle('hidden',p.dataset.panel!==tab))}

function selectStyle(style){currentStyle=style;document.querySelectorAll('.style-option').forEach(o=>o.classList.toggle('active',o.dataset.style===style))}

function updateMaterialInputDesc(){const desc=document.getElementById('materialInputDesc'),input=document.getElementById('userMaterialInput');const placeholders={A:['æŠŠä½ å·²å†™å¥½çš„æ–‡ç« ç²˜è´´åˆ°ä¸‹æ–¹','åœ¨è¿™é‡Œç²˜è´´ä½ å·²å†™å¥½çš„å®Œæ•´æ–‡ç« ...'],B:['è¾“å…¥ä½ çš„ä¸»é¢˜ã€æƒ³æ³•æˆ–çµæ„Ÿ','åœ¨è¿™é‡Œè¾“å…¥ä½ æƒ³å†™çš„ä¸»é¢˜æˆ–æƒ³æ³•...\n\nä¾‹å¦‚ï¼š\n- ä¸ºä»€ä¹ˆè¶ŠåŠªåŠ›è¶Šç„¦è™‘ï¼Ÿ\n- å¦‚ä½•åœ¨ä¿¡æ¯è¿‡è½½æ—¶ä»£ä¿æŒä¸“æ³¨'],C:['ç²˜è´´ä½ çš„é•¿ç´ æï¼ˆé€å­—ç¨¿ã€ç¬”è®°ç­‰ï¼‰','åœ¨è¿™é‡Œç²˜è´´ä½ çš„é•¿ç´ æï¼Œå¦‚è¯¾ç¨‹é€å­—ç¨¿ã€æ’­å®¢æ–‡å­—ç¨¿ã€ä¼šè®®è®°å½•ç­‰...'],D:['ç²˜è´´ä½ æ”¶é›†çš„å¤šä¸ªç´ æç‰‡æ®µ','åœ¨è¿™é‡Œç²˜è´´ä½ æ”¶é›†çš„ç´ æç‰‡æ®µ...\n\nç”¨ ===ç´ æåˆ†éš”=== åˆ†éš”ä¸åŒçš„ç´ æ']};desc.textContent=placeholders[currentMode][0];input.placeholder=placeholders[currentMode][1]}

function updateMaterialWordCount(){const text=document.getElementById('userMaterialInput').value;document.getElementById('materialWordCount').textContent=text.replace(/\s/g,'').length+' å­—';generatePrompt()}

function clearMaterialInput(){document.getElementById('userMaterialInput').value='';updateMaterialWordCount()}
function generatePrompt(){const userMaterial=document.getElementById('userMaterialInput')?.value?.trim()||'';let prompt='';const styleDesc=currentStyleTab==='custom'?document.getElementById('customStyleInput')?.value||'ä¸“ä¸šä½†æ˜“è¯»':styleDescriptions[currentStyle]||'';

if(currentMode==='A'){prompt=`ä½ æ˜¯ä¸€ä½èµ„æ·±å…¬ä¼—å·ç¼–è¾‘ï¼Œè¯·å¸®æˆ‘ä¼˜åŒ–è¿™ç¯‡æ–‡ç« çš„æ’ç‰ˆã€‚

## ä½ çš„ä»»åŠ¡

é˜…è¯»æˆ‘çš„æ–‡ç« ï¼Œç„¶åè¾“å‡ºä¸€ä¸ªæ’ç‰ˆä¼˜åŒ–åçš„ç‰ˆæœ¬ã€‚ä½ éœ€è¦ï¼š

1. **æ‰¾å‡ºå€¼å¾—çªå‡ºçš„é‡‘å¥**ï¼ˆ3-5å¥ï¼‰
   - æœ‰æ´å¯ŸåŠ›ã€åå¸¸è¯†ã€èƒ½å¼•å‘å…±é¸£çš„å¥å­
   - ç”¨ > ç¬¦å·æ ‡è®°ï¼ˆè¿™æ˜¯ç»™æ’ç‰ˆè½¯ä»¶è¯†åˆ«ç”¨çš„ï¼Œä¸æ˜¯ç»™è¯»è€…çœ‹çš„ï¼‰
   - é‡‘å¥æœ¬èº«å°±æ˜¯æ­£å¸¸çš„å¥å­ï¼Œä¸è¦åŠ "é‡‘å¥ï¼š"è¿™ç§æ ‡ç­¾

2. **æ ‡è®°éœ€è¦åŠ ç²—çš„å…³é”®è¯**
   - ç”¨ **å…³é”®è¯** æ ¼å¼
   - æ¯æ®µæœ€å¤š1-2å¤„ï¼Œæ ¸å¿ƒæ¦‚å¿µã€ä¸“ä¸šæœ¯è¯­ã€é‡è¦è§‚ç‚¹

3. **æ·»åŠ å°æ ‡é¢˜åˆ’åˆ†ç»“æ„**
   - ç”¨ ## å°æ ‡é¢˜ æ ¼å¼
   - é€šå¸¸3-5ä¸ªï¼Œè®©æ–‡ç« ç»“æ„æ¸…æ™°

4. **åœ¨åˆé€‚ä½ç½®æ’å…¥åˆ†å‰²çº¿**
   - ç”¨ --- æ ¼å¼
   - æ”¾åœ¨ä¸»é¢˜è½¬æ¢å¤„ï¼Œæ¯ç¯‡2-4å¤„

5. **å»ºè®®é…å›¾ä½ç½®**
   - ç”¨ ![é…å›¾](åœºæ™¯æè¿°) æ ¼å¼
   - åœ¨å¼€å¤´ã€æƒ…æ„Ÿé«˜æ½®ã€æ¡ˆä¾‹å¤„ã€ç»“å°¾å„å»ºè®®1å¼ 
   - åœºæ™¯æè¿°è¦å…·ä½“ï¼Œå¦‚"ä¸€ä¸ªäººç«™åœ¨åå­—è·¯å£çŠ¹è±«çš„èƒŒå½±"

## é‡è¦æé†’

- æ‰€æœ‰æ ‡è®°ç¬¦å·ï¼ˆ> ## ** --- ![]ï¼‰éƒ½æ˜¯ç»™æ’ç‰ˆè½¯ä»¶è¯†åˆ«çš„ï¼Œä¸æ˜¯ç»™è¯»è€…çœ‹çš„
- ç»å¯¹ä¸è¦åœ¨æ­£æ–‡é‡Œå†™"é‡‘å¥ï¼š"ã€"æ ‡é¢˜ï¼š"ã€"å¼ºè°ƒï¼š"è¿™ç§æ ‡ç­¾
- ä¿æŒæ–‡ç« çš„è‡ªç„¶æµç•…ï¼Œè¯»è€…çœ‹åˆ°çš„åº”è¯¥æ˜¯æ­£å¸¸çš„æ–‡ç« 
- é•¿æ®µè½æ‹†æˆ3-5å¥çš„çŸ­æ®µè½

## æˆ‘çš„æ–‡ç« 

${userMaterial||'[è¯·åœ¨ä¸Šæ–¹ç²˜è´´ä½ çš„æ–‡ç« ]'}

---

## è¾“å‡ºè¦æ±‚

1. å…ˆè¾“å‡ºæ’ç‰ˆåçš„å®Œæ•´æ–‡ç« 
2. ç„¶ååœ¨æ–‡ç« æœ«å°¾ï¼Œç”¨ä»¥ä¸‹æ ¼å¼è¾“å‡ºé…å›¾æç¤ºè¯ï¼š

===é…å›¾æç¤ºè¯===
ã€å…¬ä¼—å·å°é¢å›¾ã€‘
(ç”¨è‹±æ–‡å†™ä¸€æ®µMidjourney/DALL-Eæç¤ºè¯ï¼Œæè¿°é€‚åˆè¿™ç¯‡æ–‡ç« çš„å°é¢å›¾ï¼ŒåŒ…å«ç”»é¢å†…å®¹ã€é£æ ¼ã€è‰²è°ƒã€æ„å›¾ç­‰ï¼Œæ¯”ä¾‹2.35:1æ¨ªç‰ˆ)

ã€å°çº¢ä¹¦å°é¢å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ3:4ç«–ç‰ˆï¼Œé€‚åˆå°çº¢ä¹¦çš„å¸ç›é£æ ¼)

ã€æœ‹å‹åœˆé…å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ1:1æ–¹å½¢ï¼Œé€‚åˆæœ‹å‹åœˆåˆ†äº«)

ã€é‡‘å¥å¡ç‰‡èƒŒæ™¯ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œé€‚åˆæ”¾æ–‡å­—çš„ç®€æ´èƒŒæ™¯å›¾)`}

else if(currentMode==='B'){prompt=`ä½ æ˜¯ä¸€ä½èµ„æ·±å…¬ä¼—å·çˆ†æ¬¾å†™æ‰‹ï¼Œè¯·æ ¹æ®æˆ‘ç»™çš„ä¸»é¢˜åˆ›ä½œä¸€ç¯‡é«˜è´¨é‡åŸåˆ›æ–‡ç« ã€‚

## å†™ä½œé£æ ¼
${styleDesc}

## æ–‡ç« è¦æ±‚

1. **å­—æ•°**ï¼š1500-2500å­—
2. **å¼€å¤´**ï¼šå‰3å¥è¯å°±è¦æŠ“ä½è¯»è€…ï¼ˆç”¨æ•…äº‹ã€é—®é¢˜ã€åå¸¸è¯†è§‚ç‚¹ã€åœºæ™¯æå†™ç­‰ï¼‰
3. **èŠ‚å¥**ï¼šæ¯300-400å­—è¦æœ‰ä¸€ä¸ª"çˆ½ç‚¹"ï¼ˆå…±é¸£ã€æ´å¯Ÿã€é‡‘å¥ã€è½¬æŠ˜ï¼‰
4. **ç»“å°¾**ï¼šæœ‰åŠ›é‡çš„æ”¶å°¾ï¼Œå¯ä»¥æ˜¯è¡ŒåŠ¨å·å¬ã€æƒ…æ„Ÿå‡åã€æˆ–ç•™ä¸‹æ€è€ƒ

## è¾“å‡ºæ ¼å¼

ç›´æ¥è¾“å‡ºå®Œæ•´æ–‡ç« ï¼ŒåŒæ—¶ç”¨ä»¥ä¸‹æ ‡è®°ï¼ˆè¿™äº›æ˜¯ç»™æ’ç‰ˆè½¯ä»¶è¯†åˆ«çš„ï¼Œä¸æ˜¯ç»™è¯»è€…çœ‹çš„ï¼‰ï¼š

- > å¼€å¤´çš„è¡Œè¡¨ç¤ºé‡‘å¥ï¼ˆ4-6å¥ï¼Œæ•£å¸ƒåœ¨æ–‡ç« å„å¤„ï¼Œä¸è¦è¿ç»­å‡ºç°ï¼‰
- ## å¼€å¤´çš„è¡Œè¡¨ç¤ºå°æ ‡é¢˜ï¼ˆ3-5ä¸ªï¼‰
- **æ–‡å­—** è¡¨ç¤ºéœ€è¦åŠ ç²—çš„å…³é”®è¯
- --- è¡¨ç¤ºåˆ†å‰²çº¿ï¼ˆä¸»é¢˜è½¬æ¢å¤„ï¼‰
- ![é…å›¾](åœºæ™¯æè¿°) è¡¨ç¤ºå»ºè®®é…å›¾çš„ä½ç½®ï¼ˆ4-5å¤„ï¼‰

## ç»å¯¹ç¦æ­¢

- ä¸è¦å†™"é‡‘å¥ï¼š"ã€"æ ‡é¢˜ï¼š"ã€"å¯¼è¯­ï¼š"è¿™ç§æ ‡ç­¾
- ä¸è¦åœ¨æ®µè½å¼€å¤´å†™"é¦–å…ˆ"ã€"å…¶æ¬¡"ã€"æœ€å"è¿™ç§æ— èŠçš„è¿‡æ¸¡
- ä¸è¦ç”¨"ä½ æœ‰æ²¡æœ‰æƒ³è¿‡"ã€"å…¶å®"è¿™ç§çƒ‚å¤§è¡—çš„å¼€å¤´
- é‡‘å¥ä¸è¦è¿ç»­å‡ºç°ï¼Œä¸­é—´å¿…é¡»æœ‰æ­£æ–‡æ®µè½

## æˆ‘çš„ä¸»é¢˜

${userMaterial||'[è¯·åœ¨ä¸Šæ–¹è¾“å…¥ä½ çš„ä¸»é¢˜æˆ–æƒ³æ³•]'}

---

## è¾“å‡ºè¦æ±‚

1. å…ˆè¾“å‡ºå®Œæ•´æ–‡ç« 
2. ç„¶ååœ¨æ–‡ç« æœ«å°¾è¾“å‡ºé…å›¾æç¤ºè¯ï¼š

===é…å›¾æç¤ºè¯===
ã€å…¬ä¼—å·å°é¢å›¾ã€‘
(è‹±æ–‡Midjourneyæç¤ºè¯ï¼Œ2.35:1æ¨ªç‰ˆï¼Œè¦èƒ½æ¦‚æ‹¬æ–‡ç« ä¸»é¢˜ä¸”å¸å¼•ç‚¹å‡»)

ã€å°çº¢ä¹¦å°é¢å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ3:4ç«–ç‰ˆï¼Œå¹´è½»åŒ–ã€æœ‰å¸å¼•åŠ›)

ã€æœ‹å‹åœˆé…å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ1:1æ–¹å½¢)

ã€é‡‘å¥å¡ç‰‡èƒŒæ™¯ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œç®€æ´èƒŒæ™¯ï¼Œé€‚åˆæ”¾æ–‡å­—)`}

else if(currentMode==='C'){prompt=`ä½ æ˜¯ä¸€ä½èµ„æ·±å†…å®¹ç¼–è¾‘ï¼Œè¯·ä»æˆ‘çš„é•¿ç´ æä¸­æç‚¼å‡ºä¸€ç¯‡ç²¾åæ–‡ç« ã€‚

## æç‚¼é£æ ¼
${styleDesc}

## æç‚¼åŸåˆ™

1. **æ‰¾æ ¸å¿ƒ**ï¼šä»ç´ æä¸­è¯†åˆ«3-5ä¸ªæœ€æœ‰ä»·å€¼çš„æ ¸å¿ƒè§‚ç‚¹
2. **åˆ å†—ä½™**ï¼šåˆ é™¤é‡å¤ã€è·‘é¢˜ã€è¿‡äºå£è¯­åŒ–ã€ä»·å€¼ä¸é«˜çš„éƒ¨åˆ†
3. **ç†ç»“æ„**ï¼šé‡æ–°ç»„ç»‡æˆé€»è¾‘æ¸…æ™°çš„æ–‡ç« ç»“æ„
4. **ç‚¼é‡‘å¥**ï¼šä¿ç•™æˆ–æ”¹å†™ç´ æä¸­æœ€ç²¾å½©çš„è¡¨è¾¾
5. **æ§ç¯‡å¹…**ï¼šæœ€ç»ˆ1500-2500å­—

## è¾“å‡ºæ ¼å¼

ç”¨ä»¥ä¸‹æ ‡è®°ï¼ˆç»™æ’ç‰ˆè½¯ä»¶è¯†åˆ«ï¼Œä¸æ˜¯ç»™è¯»è€…çœ‹çš„ï¼‰ï¼š

- > å¼€å¤´çš„è¡Œ = é‡‘å¥ï¼ˆä»åŸæ–‡æç‚¼æˆ–æ”¹å†™ï¼Œ4-6å¥ï¼‰
- ## å¼€å¤´çš„è¡Œ = å°æ ‡é¢˜
- **æ–‡å­—** = éœ€è¦åŠ ç²—çš„å…³é”®è¯
- --- = åˆ†å‰²çº¿
- ![é…å›¾](åœºæ™¯æè¿°) = å»ºè®®é…å›¾ä½ç½®

## ç»å¯¹ç¦æ­¢

- ä¸è¦å†™"é‡‘å¥ï¼š"ã€"æ ¸å¿ƒè§‚ç‚¹ï¼š"è¿™ç§æ ‡ç­¾
- ä¸è¦ä¿ç•™å¤ªå¤šå£è¯­åŒ–çš„"å—¯"ã€"é‚£ä¸ª"ã€"å°±æ˜¯è¯´"
- ä¸è¦æœºæ¢°åœ°æŒ‰åŸç´ æé¡ºåºï¼Œè¦é‡æ–°ç»„ç»‡

## æˆ‘çš„åŸå§‹ç´ æ

${userMaterial||'[è¯·åœ¨ä¸Šæ–¹ç²˜è´´ä½ çš„é€å­—ç¨¿/ç¬”è®°/é•¿ç´ æ]'}

---

## è¾“å‡ºè¦æ±‚

1. å…ˆè¾“å‡ºæç‚¼åçš„å®Œæ•´æ–‡ç« 
2. ç„¶åè¾“å‡ºé…å›¾æç¤ºè¯ï¼š

===é…å›¾æç¤ºè¯===
ã€å…¬ä¼—å·å°é¢å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ2.35:1æ¨ªç‰ˆ)

ã€å°çº¢ä¹¦å°é¢å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ3:4ç«–ç‰ˆ)

ã€æœ‹å‹åœˆé…å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ1:1æ–¹å½¢)

ã€é‡‘å¥å¡ç‰‡èƒŒæ™¯ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œç®€æ´èƒŒæ™¯)`}

else{prompt=`ä½ æ˜¯ä¸€ä½èµ„æ·±å†…å®¹åˆ›ä½œè€…ï¼Œè¯·å¸®æˆ‘æŠŠå¤šä¸ªç´ ææ•´åˆæˆä¸€ç¯‡åŸåˆ›æ–‡ç« ã€‚

## å†™ä½œé£æ ¼
${styleDesc}

## æ•´åˆåŸåˆ™ï¼ˆè¿™å¾ˆé‡è¦ï¼Œè¦é¿å…æŠ„è¢­ï¼‰

1. **ç†è§£è€Œéç…§æ¬**ï¼šç†è§£æ¯ä¸ªç´ æçš„æ ¸å¿ƒè§‚ç‚¹ï¼Œç”¨è‡ªå·±çš„è¯é‡æ–°è¡¨è¾¾
2. **èåˆè€Œéæ‹¼æ¥**ï¼šæ‰¾åˆ°ç´ æä¹‹é—´çš„å†…åœ¨è”ç³»ï¼Œèåˆæˆä¸€ä¸ªæœ‰æœºæ•´ä½“
3. **å‡åè€Œéæ€»ç»“**ï¼šåŠ å…¥ä½ è‡ªå·±çš„è§†è§’ã€è¯„è®ºã€å»¶ä¼¸æ€è€ƒ
4. **é‡æ„è¡¨è¾¾**ï¼šå³ä½¿æ˜¯ç²¾å½©çš„è§‚ç‚¹ï¼Œä¹Ÿè¦æ¢ä¸€ç§è¯´æ³•

## è¾“å‡ºæ ¼å¼

ç”¨ä»¥ä¸‹æ ‡è®°ï¼ˆç»™æ’ç‰ˆè½¯ä»¶è¯†åˆ«ï¼Œä¸æ˜¯ç»™è¯»è€…çœ‹çš„ï¼‰ï¼š

- > å¼€å¤´çš„è¡Œ = é‡‘å¥ï¼ˆå¿…é¡»æ˜¯åŸåˆ›è¡¨è¾¾ï¼Œ4-6å¥ï¼‰
- ## å¼€å¤´çš„è¡Œ = å°æ ‡é¢˜
- **æ–‡å­—** = å…³é”®è¯åŠ ç²—
- --- = åˆ†å‰²çº¿
- ![é…å›¾](åœºæ™¯æè¿°) = é…å›¾ä½ç½®

## ç»å¯¹ç¦æ­¢

- ä¸è¦å†™"é‡‘å¥ï¼š"ã€"è§‚ç‚¹ï¼š"è¿™ç§æ ‡ç­¾
- ä¸è¦ç›´æ¥å¤åˆ¶åŸç´ æçš„å¥å­
- ä¸è¦æš´éœ²"è¿™æ˜¯æ•´åˆè‡ªå¤šä¸ªç´ æ"çš„ç—•è¿¹

## æˆ‘çš„ç´ æç‰‡æ®µ

${userMaterial||'[è¯·åœ¨ä¸Šæ–¹ç²˜è´´ä½ æ”¶é›†çš„å„ç§ç´ æï¼Œç”¨ ===ç´ æåˆ†éš”=== åˆ†éš”ä¸åŒç´ æ]'}

---

## è¾“å‡ºè¦æ±‚

1. å…ˆè¾“å‡ºåŸåˆ›æ–‡ç« ï¼ˆ1500-2500å­—ï¼‰
2. ç„¶åè¾“å‡ºé…å›¾æç¤ºè¯ï¼š

===é…å›¾æç¤ºè¯===
ã€å…¬ä¼—å·å°é¢å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ2.35:1æ¨ªç‰ˆ)

ã€å°çº¢ä¹¦å°é¢å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ3:4ç«–ç‰ˆ)

ã€æœ‹å‹åœˆé…å›¾ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œ1:1æ–¹å½¢)

ã€é‡‘å¥å¡ç‰‡èƒŒæ™¯ã€‘
(è‹±æ–‡æç¤ºè¯ï¼Œç®€æ´èƒŒæ™¯)`}

document.getElementById('promptText').textContent=prompt}

function copyPrompt(){navigator.clipboard.writeText(document.getElementById('promptText').textContent).then(()=>showToast('âœ… æç¤ºè¯å·²å¤åˆ¶'))}

function copyAndJump(url){navigator.clipboard.writeText(document.getElementById('promptText').textContent).then(()=>{showToast('âœ… å·²å¤åˆ¶ï¼Œæ­£åœ¨è·³è½¬...');setTimeout(()=>window.open(url,'_blank'),300)})}

function updateWordCount(){const text=document.getElementById('inputText').value;document.getElementById('wordCount').textContent=text.replace(/\s/g,'').length+' å­—'}
function parseContent(){const text=document.getElementById('inputText').value.trim();if(!text){showToast('âš ï¸ è¯·å…ˆç²˜è´´å†…å®¹');return}

// å…ˆæå–é…å›¾æç¤ºè¯éƒ¨åˆ†
const imgPromptMatch=text.match(/===é…å›¾æç¤ºè¯===([\s\S]*?)$/);
if(imgPromptMatch){
  const imgSection=imgPromptMatch[1];
  const coverMatch=imgSection.match(/ã€å…¬ä¼—å·å°é¢å›¾ã€‘\s*([\s\S]*?)(?=ã€|$)/);
  const xhsMatch=imgSection.match(/ã€å°çº¢ä¹¦å°é¢å›¾ã€‘\s*([\s\S]*?)(?=ã€|$)/);
  const socialMatch=imgSection.match(/ã€æœ‹å‹åœˆé…å›¾ã€‘\s*([\s\S]*?)(?=ã€|$)/);
  const quoteMatch=imgSection.match(/ã€é‡‘å¥å¡ç‰‡èƒŒæ™¯ã€‘\s*([\s\S]*?)(?=ã€|$)/);
  imagePrompts={
    cover:coverMatch?coverMatch[1].trim():'',
    xhsCover:xhsMatch?xhsMatch[1].trim():'',
    social:socialMatch?socialMatch[1].trim():'',
    quoteCard:quoteMatch?quoteMatch[1].trim():''
  };
  document.getElementById('coverImagePrompt').textContent=imagePrompts.cover||'æœªæ‰¾åˆ°';
  document.getElementById('xhsCoverImagePrompt').textContent=imagePrompts.xhsCover||'æœªæ‰¾åˆ°';
  document.getElementById('socialImagePrompt').textContent=imagePrompts.social||'æœªæ‰¾åˆ°';
  document.getElementById('quoteCardImagePrompt').textContent=imagePrompts.quoteCard||'æœªæ‰¾åˆ°';
}

// æå–æ–‡ç« éƒ¨åˆ†ï¼ˆå»æ‰é…å›¾æç¤ºè¯ï¼‰
const articleText=text.replace(/===é…å›¾æç¤ºè¯===[\s\S]*$/,'').trim();

blocks=[];const lines=articleText.split('\n');let i=0;
while(i<lines.length){const line=lines[i].trim();if(!line){i++;continue}
if(/^[-*_]{3,}$/.test(line)){blocks.push({type:'divider',content:''});i++;continue}
const imgMatch=line.match(/^!\[([^\]]*)\]\(([^)]+)\)$/);
if(imgMatch){const src=imgMatch[2];if(src.startsWith('http')||src.startsWith('data:')){blocks.push({type:'image',content:src})}else{blocks.push({type:'imagePlaceholder',content:src,imgPrompt:''})}i++;continue}
if(/^#{1,3}\s+/.test(line)){blocks.push({type:'heading',content:line.replace(/^#{1,3}\s+/,'')});i++;continue}
if(/^>\s*/.test(line)){let q=line.replace(/^>\s*/,'');while(i+1<lines.length&&/^>\s*/.test(lines[i+1].trim())){i++;q+='\n'+lines[i].trim().replace(/^>\s*/,'')}blocks.push({type:q.length>150?'paragraph':'quote',content:q});i++;continue}
if(/^[-*+]\s+/.test(line)){const items=[];while(i<lines.length&&/^[-*+]\s+/.test(lines[i].trim())){items.push(lines[i].trim().replace(/^[-*+]\s+/,''));i++}blocks.push({type:'list',content:items.join('\n')});continue}
if(/^\*\*[^*]+\*\*$/.test(line)){const c=line.replace(/^\*\*|\*\*$/g,'');blocks.push({type:c.length<=20?'heading':'emphasis',content:c});i++;continue}
blocks.push({type:'paragraph',content:line});i++}

document.getElementById('inputCard').style.display='none';
document.getElementById('editorSection').style.display='grid';
renderBlocks();updatePreview();updateFullArticleText();
showToast('âœ… è§£æå‡º '+blocks.length+' ä¸ªæ¨¡å—')}

function showInputCard(){document.getElementById('inputCard').style.display='block';document.getElementById('editorSection').style.display='none'}

function updateFullArticleText(){const fullText=blocks.map(b=>{switch(b.type){case'heading':return '## '+b.content;case'quote':return '> '+b.content;case'divider':return '---';case'list':return b.content.split('\n').map(item=>'- '+item).join('\n');case'imagePlaceholder':return '![é…å›¾]('+b.content+')';case'image':return '![å›¾ç‰‡]('+b.content+')';case'emphasis':return '**'+b.content+'**';default:return b.content}}).join('\n\n');document.getElementById('fullArticleText').value=fullText}

function onFullArticleInput(){if(fullArticleSyncTimeout)clearTimeout(fullArticleSyncTimeout);fullArticleSyncTimeout=setTimeout(syncFromFullArticle,1000)}

function syncFromFullArticle(){document.getElementById('inputText').value=document.getElementById('fullArticleText').value;parseContent()}

function renderBlocks(){const container=document.getElementById('blocksList');if(!blocks.length){container.innerHTML='<div style="text-align:center;color:#999;padding:40px">æš‚æ— å†…å®¹</div>';document.getElementById('blockCount').textContent='(0)';return}container.innerHTML=blocks.map((b,i)=>{const typeOpts=Object.entries(blockTypeNames).map(([v,l])=>'<option value="'+v+'"'+(b.type===v?' selected':'')+'>'+l+'</option>').join('');let content='';if(b.type==='divider'){content='<div class="divider-preview">Â· Â· Â·</div>'}else if(b.type==='image'){content='<input type="text" class="block-input" value="'+(b.content||'')+'" onchange="updateBlock('+i+', this.value)" onblur="updateAll()">'}else if(b.type==='imagePlaceholder'){content='<div class="img-placeholder"><div class="img-placeholder-text">ğŸ“· '+b.content+'</div><button class="btn btn-secondary btn-sm" onclick="openImageModalFor('+i+')">ä¸Šä¼ å›¾ç‰‡</button></div>'}else{content='<textarea class="block-input" onchange="updateBlock('+i+', this.value)" onblur="updateAll()">'+(b.content||'')+'</textarea>'}return '<div class="block-item"><div class="block-head"><select class="block-type-sel" onchange="changeBlockType('+i+', this.value)">'+typeOpts+'</select><div class="block-actions"><button class="block-act-btn" onclick="moveBlock('+i+', -1)">â†‘</button><button class="block-act-btn" onclick="moveBlock('+i+', 1)">â†“</button><button class="block-act-btn del" onclick="deleteBlock('+i+')">Ã—</button></div></div><div class="block-body">'+content+'</div></div>'}).join('');document.getElementById('blockCount').textContent='('+blocks.length+')'}

function updateBlock(i,v){blocks[i].content=v}
function updateAll(){updatePreview();updateFullArticleText()}
function changeBlockType(i,t){blocks[i].type=t;renderBlocks();updateAll()}
function moveBlock(i,dir){const j=i+dir;if(j<0||j>=blocks.length)return;[blocks[i],blocks[j]]=[blocks[j],blocks[i]];renderBlocks();updateAll()}
function deleteBlock(i){blocks.splice(i,1);renderBlocks();updateAll()}
function addBlock(type){blocks.push({type,content:'',imgPrompt:''});renderBlocks();updateAll()}
function openImageModalFor(i){editingImageIndex=i;document.getElementById('imageUrlInput').value='';document.getElementById('imageModal').classList.add('show')}
function closeImageModal(){document.getElementById('imageModal').classList.remove('show');editingImageIndex=null}
function confirmImage(){const url=document.getElementById('imageUrlInput').value.trim();if(editingImageIndex!==null&&url){if(blocks[editingImageIndex]?.type==='imagePlaceholder'||blocks[editingImageIndex]?.type==='image'){blocks[editingImageIndex]={type:'image',content:url}}else{blocks.splice(editingImageIndex,0,{type:'image',content:url})}renderBlocks();updateAll();closeImageModal();showToast('âœ… å›¾ç‰‡å·²æ·»åŠ ')}}
function handleImageUpload(e){const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=ev=>{document.getElementById('imageUrlInput').value=ev.target.result};reader.readAsDataURL(file)}}
function updatePreview(){const container=document.getElementById('previewContent');if(!blocks.length){container.innerHTML='<div style="text-align:center;color:#999;padding:40px">é¢„è§ˆå†…å®¹</div>';return}container.innerHTML=blocks.map(b=>generateBlockHTML(b)).join('')}

function generateBlockHTML(block){const s=schemes[currentScheme];switch(block.type){case'paragraph':let p=(block.content||'').replace(/\*\*([^*]+)\*\*/g,'<strong style="color:'+s.primary+';">$1</strong>').replace(/\n/g,'<br>');return '<p style="font-size:15px;color:'+s.text+';line-height:2;margin-bottom:20px;">'+p+'</p>';case'emphasis':return '<p style="font-size:15px;color:'+s.text+';line-height:2;margin-bottom:20px;"><strong style="color:'+s.primary+';">'+(block.content||'')+'</strong></p>';case'heading':return '<p style="font-size:17px;color:'+s.primary+';font-weight:600;margin:28px 0 16px;">'+(block.content||'')+'</p>';case'divider':return '<p style="text-align:center;color:'+s.border+';margin:28px 0;letter-spacing:8px;">Â·Â·Â·</p>';case'quote':const len=(block.content||'').length;if(len<=40)return '<p style="font-size:17px;color:'+s.primary+';line-height:1.8;margin:28px 0;text-align:center;font-weight:600;">'+block.content+'</p>';return '<section style="background:linear-gradient(135deg,'+s.bgWarm+','+s.bgWarmEnd+');border-left:3px solid '+s.primary+';padding:18px 20px;margin:24px 0;border-radius:0 10px 10px 0;"><p style="font-size:15px;color:'+s.primary+';line-height:1.9;margin:0;font-weight:500;">'+(block.content||'').replace(/\n/g,'<br>')+'</p></section>';case'list':const items=(block.content||'').split('\n').filter(x=>x.trim());return '<section style="background:'+s.bgCard+';padding:18px 20px;margin:24px 0;border-radius:10px;border:1px solid '+s.border+';">'+items.map(item=>'<p style="font-size:14px;color:'+s.textLight+';line-height:2;margin-bottom:8px;padding-left:16px;position:relative;"><span style="position:absolute;left:0;color:'+s.primary+';">â†’</span>'+item+'</p>').join('')+'</section>';case'image':return block.content?'<p style="text-align:center;margin:24px 0;"><img src="'+block.content+'" style="max-width:100%;border-radius:10px;"></p>':'';case'imagePlaceholder':return '<p style="text-align:center;margin:24px 0;padding:28px;background:#fafafa;border-radius:10px;color:#999;font-size:13px;border:1px dashed #ddd;">ğŸ“· '+(block.content||'å»ºè®®æ’å…¥å›¾ç‰‡')+'</p>';default:return ''}}

function generateFullCode(){return blocks.filter(b=>b.type!=='imagePlaceholder').map(b=>generateBlockHTML(b)).join('')}
function copyAllCode(){const code=generateFullCode();if(!code){showToast('âš ï¸ æ— å†…å®¹');return}navigator.clipboard.writeText(code).then(()=>showToast('âœ… ä»£ç å·²å¤åˆ¶'))}

function generateMaterials(){const articleSummary=blocks.filter(b=>['paragraph','quote','heading'].includes(b.type)).map(b=>b.content).join('\n').substring(0,2000);if(!articleSummary.trim()){showToast('âš ï¸ è¯·å…ˆåœ¨æ­¥éª¤3å®Œæˆæ–‡ç« æ’ç‰ˆ');return}

const prompt=`ä½ æ˜¯ä¸€ä½èµ„æ·±æ–°åª’ä½“è¿è¥ä¸“å®¶ï¼Œè¯·æ ¹æ®ä»¥ä¸‹å…¬ä¼—å·æ–‡ç« å†…å®¹ï¼Œç”Ÿæˆå…¨å¥—è¥é”€ç‰©æ–™ã€‚

## æ–‡ç« å†…å®¹
${articleSummary}

## è¯·ç”Ÿæˆä»¥ä¸‹12ç§ç‰©æ–™

æ³¨æ„ï¼šç›´æ¥è¾“å‡ºå†…å®¹ï¼Œä¸è¦æœ‰å¤šä½™çš„è§£é‡Šã€‚æ¯ç§ç‰©æ–™ç”¨ã€ã€‘æ ‡æ³¨ç±»å‹åã€‚

ã€æœ‹å‹åœˆï¼ˆä½œè€…ç‰ˆï¼‰ã€‘
ç¬¬ä¸€äººç§°è§†è§’ï¼Œåˆ†äº«åˆ›ä½œæ„Ÿæ‚Ÿæˆ–æ–‡ç« æ ¸å¿ƒæ´å¯Ÿï¼Œå¼•å‘å¥½å¥‡ä½†ä¸å‰§é€ï¼Œ150å­—ä»¥å†…ï¼Œè‡ªç„¶ä½¿ç”¨1-2ä¸ªemoji

ã€æœ‹å‹åœˆï¼ˆè½¬å‘ç‰ˆï¼‰ã€‘
ç¬¬ä¸‰äººç§°æ¨èè§†è§’ï¼Œçªå‡ºæ–‡ç« å¯¹è¯»è€…çš„ä»·å€¼ï¼Œ150å­—ä»¥å†…

ã€å°çº¢ä¹¦æ–‡æ¡ˆã€‘
å£è¯­åŒ–ã€æœ‰ç½‘æ„Ÿï¼Œå¼€å¤´è¦æœ‰hookï¼Œæ­£æ–‡åˆ†æ®µæ¸…æ™°ï¼Œç»“å°¾å¸¦3-5ä¸ªè¯é¢˜æ ‡ç­¾ï¼Œ300å­—å·¦å³

ã€å°çº¢ä¹¦æ ‡é¢˜ã€‘
5ä¸ªå¤‡é€‰æ ‡é¢˜ï¼Œæ¯ä¸ªéƒ½è¦æœ‰æ•°å­—æˆ–æƒ…ç»ªè¯æˆ–ç—›ç‚¹è¯ï¼Œæ§åˆ¶åœ¨20å­—å†…ï¼Œæ ¼å¼ï¼š
1. xxx
2. xxx
...

ã€ç¤¾ç¾¤è½¬å‘è¯æœ¯ã€‘
é€‚åˆå¾®ä¿¡ç¾¤åˆ†äº«ï¼Œå¼€é—¨è§å±±è¯´ä»·å€¼ï¼Œä¸è¦è¿‡åº¦è¥é”€æ„Ÿï¼Œ100å­—ä»¥å†…

ã€ç§èŠæ¨èè¯æœ¯ã€‘
åƒæœ‹å‹ä¹‹é—´æ¨èå¥½æ–‡ç« çš„è¯­æ°”ï¼Œè‡ªç„¶ä¸åˆ»æ„ï¼Œ80å­—ä»¥å†…

ã€æ–‡ç« æ ‡é¢˜å¤‡é€‰ã€‘
8ä¸ªä¸åŒé£æ ¼çš„æ ‡é¢˜ï¼š
1. æ‚¬å¿µå‹ï¼šxxx
2. æ•°å­—å‹ï¼šxxx
3. ç—›ç‚¹å‹ï¼šxxx
4. å¥½å¥‡å‹ï¼šxxx
5. å…±é¸£å‹ï¼šxxx
6. å¯¹æ¯”å‹ï¼šxxx
7. æ•…äº‹å‹ï¼šxxx
8. å¹²è´§å‹ï¼šxxx

ã€ç›®æ ‡äººç¾¤ç”»åƒã€‘
3-5ç±»æœ€é€‚åˆé˜…è¯»è¿™ç¯‡æ–‡ç« çš„äººç¾¤ï¼Œæ¯ç±»åŒ…æ‹¬ï¼šäººç¾¤ç‰¹å¾ã€æ ¸å¿ƒç—›ç‚¹ã€ä¸ºä»€ä¹ˆè¿™ç¯‡æ–‡ç« å¯¹TAæœ‰ç”¨

ã€é‡‘å¥å¡ç‰‡æ–‡æ¡ˆã€‘
ä»æ–‡ç« ä¸­æå–æˆ–æ”¹å†™5æ¡é€‚åˆåšæˆå›¾ç‰‡åˆ†äº«çš„é‡‘å¥ï¼Œæ¯æ¡15-50å­—

ã€çŸ­è§†é¢‘å£æ’­æ–‡æ¡ˆã€‘
é€‚åˆ1åˆ†é’ŸçŸ­è§†é¢‘çš„å£æ’­ç¨¿ï¼Œå¼€å¤´5ç§’å¿…é¡»æœ‰hookï¼Œ300å­—å·¦å³

ã€æ¬¡æ¡/è½¬è½½ç‰ˆã€‘
100å­—ç®€ä»‹ + 3ä¸ªæ ¸å¿ƒçœ‹ç‚¹

ã€SEOå…³é”®è¯ã€‘
10-15ä¸ªç›¸å…³æœç´¢å…³é”®è¯ï¼ŒåŒ…æ‹¬é•¿å°¾è¯`;

document.getElementById('materialPromptText').textContent=prompt;
document.getElementById('materialPromptCard').style.display='block';
document.getElementById('materialInputCard').style.display='block';
document.getElementById('imagePromptsCard').style.display='block';
initMaterialCards();
showToast('âœ… æç¤ºè¯å·²ç”Ÿæˆ')}

function copyImagePromptByType(type){navigator.clipboard.writeText(imagePrompts[type]||'').then(()=>showToast(imagePrompts[type]?'âœ… å·²å¤åˆ¶':'âš ï¸ æœªæ‰¾åˆ°è¯¥æç¤ºè¯'))}
function copyImgAndJump(type,url){if(!imagePrompts[type]){showToast('âš ï¸ æœªæ‰¾åˆ°è¯¥æç¤ºè¯');return}navigator.clipboard.writeText(imagePrompts[type]).then(()=>{showToast('âœ… å·²å¤åˆ¶ï¼Œæ­£åœ¨è·³è½¬...');setTimeout(()=>window.open(url,'_blank'),300)})}

function initMaterialCards(){document.getElementById('materialGrid').innerHTML=materialTypes.map(mt=>'<div class="material-card"><div class="material-head"><div class="material-title">'+mt.icon+' '+mt.name+'</div><button class="btn btn-sm btn-outline" onclick="copyMaterial(\''+mt.id+'\')">å¤åˆ¶</button></div><div class="material-content '+(materials[mt.id]?'':'empty')+'" id="mat_'+mt.id+'">'+(materials[mt.id]||'ç­‰å¾…å¡«å……...')+'</div></div>').join('');document.getElementById('materialGrid').style.display='grid';document.getElementById('materialActionsCard').style.display='block'}

function copyMaterialPrompt(){navigator.clipboard.writeText(document.getElementById('materialPromptText').textContent).then(()=>showToast('âœ… å·²å¤åˆ¶'))}
function copyMaterialAndJump(url){navigator.clipboard.writeText(document.getElementById('materialPromptText').textContent).then(()=>{showToast('âœ… å·²å¤åˆ¶ï¼Œæ­£åœ¨è·³è½¬...');setTimeout(()=>window.open(url,'_blank'),300)})}

function parseMaterials(){const text=document.getElementById('materialInputText').value.trim();if(!text){showToast('âš ï¸ è¯·å…ˆç²˜è´´AIè¿”å›çš„å†…å®¹');return}materials={};const parts=text.split(/ã€([^ã€‘]+)ã€‘/);for(let i=1;i<parts.length;i+=2){const name=parts[i].trim(),content=(parts[i+1]||'').trim();let id=null;if(name.includes('æœ‹å‹åœˆ')&&(name.includes('ä½œè€…')||name.includes('æœ¬äºº')))id='pyq_author';else if(name.includes('æœ‹å‹åœˆ'))id='pyq_assistant';else if(name.includes('å°çº¢ä¹¦')&&name.includes('æ ‡é¢˜'))id='xhs_titles';else if(name.includes('å°çº¢ä¹¦'))id='xiaohongshu';else if(name.includes('ç¤¾ç¾¤'))id='community';else if(name.includes('ç§èŠ'))id='private';else if(name.includes('æ ‡é¢˜'))id='titles';else if(name.includes('äººç¾¤'))id='audience';else if(name.includes('é‡‘å¥'))id='quotes';else if(name.includes('è§†é¢‘')||name.includes('å£æ’­'))id='video';else if(name.includes('æ¬¡æ¡')||name.includes('è½¬è½½'))id='secondary';else if(name.includes('SEO')||name.includes('å…³é”®è¯'))id='seo';if(id&&content)materials[id]=content}materialTypes.forEach(mt=>{const el=document.getElementById('mat_'+mt.id);if(el){el.textContent=materials[mt.id]||'ç­‰å¾…å¡«å……...';el.classList.toggle('empty',!materials[mt.id])}});showToast('âœ… æˆåŠŸè§£æ '+Object.keys(materials).length+' ç§ç‰©æ–™')}

function clearMaterialsInput(){document.getElementById('materialInputText').value=''}
function copyMaterial(id){navigator.clipboard.writeText(materials[id]||'').then(()=>showToast(materials[id]?'âœ… å·²å¤åˆ¶':'âš ï¸ è¯¥ç‰©æ–™è¿˜æœªå¡«å……'))}
function copyAllMaterials(){let allText=materialTypes.filter(mt=>materials[mt.id]).map(mt=>'ã€'+mt.name+'ã€‘\n'+materials[mt.id]).join('\n\n');if(allText)navigator.clipboard.writeText(allText).then(()=>showToast('âœ… æ‰€æœ‰ç‰©æ–™å·²å¤åˆ¶'));else showToast('âš ï¸ è¿˜æ²¡æœ‰ç‰©æ–™å†…å®¹')}
function exportMaterials(){let allText='çŒ«é—¨æ™ºèƒ½æ’ç‰ˆå™¨ - è¥é”€ç‰©æ–™å¯¼å‡º\n'+'='.repeat(40)+'\n\n';materialTypes.forEach(mt=>{allText+='ã€'+mt.name+'ã€‘\n'+(materials[mt.id]||'ï¼ˆæœªå¡«å……ï¼‰')+'\n\n'});const blob=new Blob([allText],{type:'text/plain;charset=utf-8'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='è¥é”€ç‰©æ–™_'+new Date().toLocaleDateString()+'.txt';a.click();showToast('âœ… å·²å¯¼å‡ºæ–‡ä»¶')}

function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2000)}

function resetAll(){if(blocks.length&&!confirm('ç¡®å®šæ¸…ç©ºæ‰€æœ‰å†…å®¹ï¼Ÿ'))return;blocks=[];materials={};imagePrompts={};document.getElementById('inputText').value='';document.getElementById('userMaterialInput').value='';document.getElementById('materialInputText').value='';document.getElementById('inputCard').style.display='block';document.getElementById('editorSection').style.display='none';['materialPromptCard','materialInputCard','imagePromptsCard','materialGrid','materialActionsCard'].forEach(id=>document.getElementById(id).style.display='none');renderBlocks();updatePreview();goToStep(1)}

document.querySelectorAll('.color-btn').forEach(btn=>{btn.addEventListener('click',()=>{document.querySelectorAll('.color-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');currentScheme=btn.dataset.scheme;renderBlocks();updatePreview()})});
document.querySelectorAll('.modal-overlay').forEach(o=>{o.addEventListener('click',e=>{if(e.target===o)o.classList.remove('show')})});
generatePrompt();
</script>
</body>
</html>
